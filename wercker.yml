
box: maven:3-jdk-7

build:
  steps:
    - script:
        name: create cache directory
        code: |
          ls -la $WERCKER_CACHE_DIR/.m2/repository
          mkdir -p $WERCKER_CACHE_DIR/.m2/repository
          ln -sf $WERCKER_CACHE_DIR/.m2/repository /root/.m2/repository
    - script:
        name: maven package
        code: |
          mvn clean package -Pdevelop -Dmaven.test.skip=true
    - script:
        name: show cache size
        code: |
          echo $WERCKER_CACHE_DIR/.m2
          ls -la $WERCKER_CACHE_DIR/.m2
          du -sh $WERCKER_CACHE_DIR/.m2
          ls -la /root/.m2
          ls -la /root/.m2/repository
